<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>mlvs.me — Home</title>
    <link rel="stylesheet" href="/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
  </head>
  <body>
  <main id="homeShell" class="shell sidebar-hidden">
  <!-- Sidebar -->
  <aside class="sidebar" aria-label="Sidebar Navigation" aria-hidden="true">
        <div class="side-group">
          <div class="side-title">Navigation</div>
          <a class="side-link" href="/">Home</a>
          <a class="side-link" href="/dashboard">Dashboard</a>
        </div>
        <div class="side-group">
          <div class="side-title">More</div>
          <a class="side-link" href="/api/status" target="_blank" rel="noopener">API</a>
          <% if (brand.inviteUrl) { %><a class="side-link" href="/invite">Invite</a><% } %>
          <% if (brand.supportUrl) { %><a class="side-link" href="<%= brand.supportUrl %>" target="_blank" rel="noopener">Support</a><% } %>
          <a class="side-link" href="<%= brand.githubUrl %>" target="_blank" rel="noopener">GitHub</a>
        </div>
      </aside>
      

      <!-- Content -->
    <section class="content">
      <div class="content-head" style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
        <button id="homeSideToggle" class="icon-btn" aria-label="Toggle sidebar" title="Toggle sidebar">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="4" y="6" width="16" height="2" rx="1" fill="currentColor"/>
            <rect x="4" y="11" width="16" height="2" rx="1" fill="currentColor"/>
            <rect x="4" y="16" width="16" height="2" rx="1" fill="currentColor"/>
          </svg>
        </button>
      </div>

  <!-- Hero -->
  <section class="hero hero-advanced animated-surface with-bg" aria-label="Hero">
      <div class="hero-bg" style="background-image:url('https://cdn.discordapp.com/attachments/1335734480253747297/1405213387612225666/123.jpg?ex=689e0273&is=689cb0f3&hm=19a11ac5f1238bc1c4c722baf9a232df3a251bf952b4983ae14de9bf5ece8661&')"></div>
      <div class="hero-overlay"></div>
      <div class="orb a"></div>
      <div class="orb b"></div>
      <div class="orb c"></div>
      <div class="container hero-grid">
        <div class="hero-left">
          <div class="eyebrow">Modern Discord Bot</div>
  <h1 class="hero-title gradient-text" aria-label="mlvs dot me Discord bot">mlvs.me</h1>
          <p class="hero-sub">Fast. Sleek. Discord-native. Control your bot with a live dashboard.</p>
          <p class="hero-sub"><%= brand.subtitle %></p>
          <div class="hero-actions">
            <% if (brand.inviteUrl) { %>
              <a class="btn primary" href="/invite">Add to Discord</a>
            <% } %>
            <a class="btn ghost" href="/dashboard">Open Dashboard</a>
          </div>
          <div class="hero-stats">
            <div class="stat-card">
              <div class="stat-value <%= status==='Online'?'ok':'bad' %>"><%= status %></div>
              <div class="stat-label">Status</div>
            </div>
            <div class="stat-card">
              <div class="stat-value"><%= guilds %></div>
              <div class="stat-label">Servers</div>
            </div>
            <div class="stat-card">
              <div class="stat-value"><%= users %></div>
              <div class="stat-label">Users</div>
            </div>
          </div>
        </div>
        <div class="hero-right">
          <div class="tile" style="display:grid; gap:14px; position:relative; overflow:hidden">
            <div style="display:flex; align-items:center; gap:10px">
              <div style="position:relative">
                <img src="/logo.png" alt="Bot" style="width:56px;height:56px;border-radius:18px; border:1px solid hsl(var(--border))" />
                <span id="liveDot" data-state="<%= status %>" style="position:absolute; right:4px; bottom:4px; width:14px; height:14px; border:2px solid hsl(var(--card)); border-radius:50%; box-shadow:0 0 0 4px rgba(0,0,0,.35)"></span>
              </div>
              <div style="display:flex; flex-direction:column">
                <strong style="font-size:18px; line-height:1"><%= botName %></strong>
                <span class="muted" style="font-size:12px">Live Bot Card</span>
              </div>
              <div style="margin-left:auto; display:flex; gap:6px; flex-wrap:wrap">
                <span class="badge" id="heroStatus"><%= status %></span>
                <span class="badge" id="heroGuilds"><%= guilds %> guilds</span>
                <span class="badge" id="heroUsers"><%= users %> users</span>
              </div>
            </div>
            <div style="display:grid; gap:12px">
              <div style="display:flex; align-items:center; gap:12px">
                <div style="flex:1">
                  <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:4px">
                    <span class="muted" style="font-size:12px; letter-spacing:.08em">LATENCY</span>
                    <span id="heroLatency" style="font-size:12px">— ms</span>
                  </div>
                  <svg id="heroLatencySpark" viewBox="0 0 160 40" preserveAspectRatio="none" style="width:100%; height:40px"></svg>
                </div>
              </div>
              <div style="display:grid; grid-template-columns: repeat(2,1fr); gap:10px">
                <div style="padding:10px; border:1px solid hsl(var(--border)); border-radius:12px; background:hsl(var(--card)/.6); display:grid; gap:4px">
                  <span class="muted" style="font-size:11px; letter-spacing:.08em">MEMORY</span>
                  <strong id="heroMem" style="font-size:14px">— MB</strong>
                </div>
                <div style="padding:10px; border:1px solid hsl(var(--border)); border-radius:12px; background:hsl(var(--card)/.6); display:grid; gap:4px">
                  <span class="muted" style="font-size:11px; letter-spacing:.08em">CPU</span>
                  <strong id="heroCpu" style="font-size:14px">— %</strong>
                </div>
              </div>
            </div>
            <div style="display:flex; gap:10px; flex-wrap:wrap">
              <a href="/api/status" target="_blank" class="pill small">Health JSON</a>
              <a href="/dashboard" class="pill small">Open Dashboard</a>
              <% if (brand.inviteUrl) { %><a href="/invite" class="pill small">Invite</a><% } %>
            </div>
            <canvas id="miniMetric" width="220" height="80" style="position:absolute; inset:auto -40px -40px auto; opacity:.08; pointer-events:none"></canvas>
          </div>
          <div class="tile note">
            <div class="note-title">Tip</div>
            <div class="note-body">Press Ctrl/Cmd + K to search commands instantly.</div>
          </div>
        </div>
      </div>
  </section>
  <script>
    (function(){
      const dot = document.getElementById('liveDot');
      if (dot){
        const st = dot.getAttribute('data-state');
        dot.style.background = st === 'Online' ? '#10b981' : '#ef4444';
      }
      // hero mini metrics
      const latSvg = document.getElementById('heroLatencySpark');
      const latArr = []; const w=160,h=40;
      function drawSpark(){
        if(!latSvg) return; const max = Math.max(10,...latArr,50); const step = latArr.length>1? w/(latArr.length-1):w; const d = latArr.map((v,i)=>`${i?'L':'M'}${(i*step).toFixed(2)},${(h-(v/max)*h).toFixed(2)}`).join(' '); latSvg.innerHTML = `<path d="${d}" fill="none" stroke="currentColor" stroke-width="2" opacity="0.7"/>`; }
      async function pull(){
        try{ const r = await fetch('/api/metrics',{cache:'no-store'}); const j = await r.json(); const lat = j.latencyMs||[]; const mem=j.memoryMB||[]; const cpu=j.cpu||[]; if(lat.length){ const v=lat[lat.length-1]; latArr.push(v); while(latArr.length>50) latArr.shift(); document.getElementById('heroLatency').textContent = v+ ' ms'; }
          if(mem.length) document.getElementById('heroMem').textContent = mem[mem.length-1] + ' MB';
          if(cpu.length) document.getElementById('heroCpu').textContent = cpu[cpu.length-1] + ' %';
          drawSpark();
        }catch{}
      }
      pull(); setInterval(pull,15000);
    })();
  </script>

    <!-- Capabilities -->
    <section class="capabilities">
      <div class="container">
        <div class="section-head">
          <h2>Capabilities</h2>
          <p class="muted">A clean, extensible foundation with a live dashboard and status API.</p>
        </div>
        <div class="cap-grid">
          <div class="cap-card">
            <h3>Command System</h3>
            <p>Structured handlers, categories, and sleek embeds.</p>
          </div>
          <div class="cap-card">
            <h3>Dashboard</h3>
            <p>Express + EJS with live stats and a status endpoint.</p>
          </div>
          <div class="cap-card">
            <h3>Branding</h3>
            <p>Bring your own logo, banner, colors via env.</p>
          </div>
          <div class="cap-card">
            <h3>Deploy</h3>
            <p>Docker/Dokploy ready with health checks.</p>
          </div>
        </div>
      </div>
  </section>

  <!-- Command Explorer (vanilla) -->
  <section class="explorer">
      <div class="container">
        <div class="section-head">
          <h2>Command Explorer</h2>
          <p class="muted">Search and filter by category. Click a card to copy usage.</p>
        </div>
        <div class="explorer-toolbar">
          <div class="input">
            <input id="cmdSearch" type="text" placeholder="Search commands..." aria-label="Search commands" />
            <span class="kbd">Ctrl/Cmd + K</span>
          </div>
          <div id="cmdChips" class="chipbar">
            <% const cats = Object.keys(commands||{}); for (const cat of cats) { %>
              <span class="chip" data-cat="<%= cat %>"><%= cat %></span>
            <% } %>
          </div>
        </div>
        <div id="cmdGrid" class="explorer-grid">
          <% for (const [cat, items] of Object.entries(commands||{})) { %>
            <% for (const it of items) { %>
              <div class="explorer-card" data-name="<%= it.name %>" data-desc="<%= it.description || '' %>" data-cat="<%= cat %>">
                <div class="ex-head">
                  <div class="ex-name">Command: <code><%= it.name %></code></div>
                </div>
                <% if (it.description) { %>
                  <div class="ex-desc"><%= it.description %></div>
                <% } %>
                <div class="ex-foot">Usage: <code><%= it.usage %></code></div>
                <div style="display:flex; gap:8px; margin-top:6px">
                  <button class="btn small copy-btn" data-usage="<%= it.usage %>">Copy Usage</button>
                </div>
              </div>
            <% } %>
          <% } %>
        </div>
      </div>
  </section>

  <!-- Getting Started CTA -->
  <section class="cta">
      <div class="container">
        <div class="cta-box">
          <div class="cta-left">
            <h3>Get Started in minutes</h3>
            <ol class="steps">
              <li>Invite the bot to your server.</li>
              <li>Open the dashboard to monitor live stats.</li>
              <li>Explore commands with the explorer above.</li>
            </ol>
          </div>
          <div class="cta-actions">
            <% if (brand.inviteUrl) { %>
              <a class="btn primary" href="/invite">Invite</a>
            <% } %>
            <a class="btn" href="/dashboard">Dashboard</a>
            <% if (brand.supportUrl) { %>
              <a class="btn" href="<%= brand.supportUrl %>" target="_blank" rel="noopener">Support</a>
            <% } %>
          </div>
        </div>
      </div>
  </section>

  <footer class="footer">
      <div class="container footer-row">
        <div class="footer-left">
          <span>© <%= new Date().getFullYear() %> <%= brand.title %></span>
        </div>
        <div class="footer-right">
          <span class="badge <%= status==='Online'?'green':'red' %>"><%= status %></span>
        </div>
      </div>
    </footer>
      </section>
    </main>

    <script>
      // Copy Usage buttons
      document.addEventListener('click', async (e) => {
        const btn = e.target.closest('.copy-btn');
        if (!btn) return;
        const usage = btn.getAttribute('data-usage');
        try {
          await navigator.clipboard.writeText(usage);
          const prev = btn.textContent; btn.textContent = 'Copied!';
          setTimeout(() => btn.textContent = prev, 1200);
        } catch {}
      });
    </script>
    <script src="/app.js"></script>
  </body>
 </html>
