<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title><%= botName %> — Home</title>
    <link rel="stylesheet" href="/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
  </head>
  <body>
    <!-- Navbar -->
    <header class="navbar glass bordered">
      <div class="container inner">
        <a class="brand" href="/">
          <img src="/logo.png" alt="logo" />
          <span><%= brand.title %></span>
        </a>
        <nav class="nav-links">
          <a class="pill small active" href="/">Home</a>
          <a class="pill small" href="/dashboard">Dashboard</a>
          <a class="pill small" href="/api/status" target="_blank">API</a>
          <% if (brand.inviteUrl) { %><a class="pill small" href="/invite">Invite</a><% } %>
        </nav>
        <div class="nav-actions">
          <% if (brand.supportUrl) { %><a class="pill small" href="<%= brand.supportUrl %>" target="_blank">Support</a><% } %>
          <a class="pill small" href="<%= brand.githubUrl %>" target="_blank">GitHub</a>
        </div>
        <button class="burger" id="navBurger" aria-label="Open menu"><span></span></button>
      </div>
      <div class="mobile-menu" id="mobileMenu" aria-hidden="true">
        <div class="mobile-sheet card">
          <div class="row">
            <a class="pill" href="/">Home</a>
            <a class="pill" href="/dashboard">Dashboard</a>
            <a class="pill" href="/api/status" target="_blank">API</a>
            <% if (brand.inviteUrl) { %><a class="pill" href="/invite">Invite</a><% } %>
            <% if (brand.supportUrl) { %><a class="pill" href="<%= brand.supportUrl %>" target="_blank">Support</a><% } %>
            <a class="pill" href="<%= brand.githubUrl %>" target="_blank">GitHub</a>
          </div>
        </div>
      </div>
    </header>

    <!-- Hero -->
    <section class="hero" style="background-image:url('<%= brand.homeBannerUrl || brand.bannerUrl %>')">
      <div class="layer"></div>
      <div class="container content">
        <img class="logo" src="/logo.png" alt="logo" />
        <h1><%= botName %></h1>
        <p class="muted"><%= brand.subtitle %></p>
        <div class="kpis">
          <div class="kpi"><div class="value"><%= status %></div><div class="label">Status</div></div>
          <div class="kpi"><div class="value"><%= guilds %></div><div class="label">Servers</div></div>
          <div class="kpi"><div class="value"><%= users %></div><div class="label">Users</div></div>
        </div>
      </div>
    </section>

    <!-- Features -->
    <section>
      <div class="container">
        <h2 class="section-title">Features</h2>
        <div class="grid-3">
          <div class="feature card"><h3>Live Stats</h3><p>Monitor servers and users in real time.</p></div>
          <div class="feature card"><h3>Commands</h3><p>Categorized commands with modern embeds.</p></div>
          <div class="feature card"><h3>Branding</h3><p>Bring your own logo, banner, and colors.</p></div>
          <div class="feature card"><h3>Docker Ready</h3><p>Deploy with Docker/Dokploy in minutes.</p></div>
          <div class="feature card"><h3>Status API</h3><p>Health endpoint for monitoring.</p></div>
          <div class="feature card"><h3>Logging</h3><p>Readable startup banner and request logs.</p></div>
        </div>
      </div>
    </section>

    <!-- Command Explorer -->
    <section class="command-explorer">
      <div class="container">
        <h2 class="section-title">Command Explorer</h2>
        <div class="toolbar">
          <label class="input"><input type="search" id="cmdSearch" placeholder="Search commands..." autocomplete="off" /><span class="muted">Ctrl/Cmd + K</span></label>
          <div class="chipbar" id="cmdChips">
            <% Object.keys(commands||{}).forEach(function(cat){ %>
              <span class="chip" data-cat="<%= cat %>"><%= cat.charAt(0).toUpperCase()+cat.slice(1) %></span>
            <% }) %>
          </div>
        </div>
        <div class="commands-grid" id="cmdGrid">
          <% Object.keys(commands||{}).forEach(function(cat){ %>
            <% (commands[cat]||[]).forEach(function(cmd){ %>
              <div class="cmd-card" data-cat="<%= cat %>" data-name="<%= cmd.name %>" data-desc="<%= cmd.description || '' %>">
                <div class="name">Command: <code><%= cmd.name %></code></div>
                <% if (cmd.description) { %><div class="desc"><%= cmd.description %></div><% } %>
                <div class="usage">Usage: <code><%= cmd.usage %></code></div>
              </div>
            <% }) %>
          <% }) %>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="container" style="display:flex;justify-content:space-between;align-items:center;gap:12px">
        <div>© <%= new Date().getFullYear() %> <%= brand.title %></div>
        <div>
          <span class="badge <%= status==='Online'?'green':'red' %>"><%= status %></span>
        </div>
      </div>
    </footer>

    <script>
      // Mobile nav toggle
      const burger = document.getElementById('navBurger');
      const menu = document.getElementById('mobileMenu');
      if (burger && menu) {
        burger.addEventListener('click', () => {
          const open = menu.style.display === 'block';
          menu.style.display = open ? 'none' : 'block';
          menu.setAttribute('aria-hidden', String(open));
        });
        menu.addEventListener('click', (e) => { if (e.target === menu) menu.style.display = 'none'; });
      }

      // Command search + chips
      const input = document.getElementById('cmdSearch');
      const chips = document.getElementById('cmdChips');
      const grid = document.getElementById('cmdGrid');
      let activeCat = null;
      const applyFilter = () => {
        const q = (input?.value || '').toLowerCase().trim();
        [...grid.children].forEach(card => {
          const name = card.dataset.name?.toLowerCase() || '';
          const desc = card.dataset.desc?.toLowerCase() || '';
          const cat = card.dataset.cat;
          const matchesText = !q || name.includes(q) || desc.includes(q);
          const matchesCat = !activeCat || cat === activeCat;
          card.style.display = matchesText && matchesCat ? '' : 'none';
        });
      };
      input?.addEventListener('input', applyFilter);
      chips?.addEventListener('click', (e) => {
        const el = e.target.closest('.chip');
        if (!el) return;
        if (activeCat === el.dataset.cat) { activeCat = null; el.classList.remove('active'); }
        else {
          activeCat = el.dataset.cat;
          [...chips.children].forEach(c => c.classList.remove('active'));
          el.classList.add('active');
        }
        applyFilter();
      });
      // Cmd+K to focus search
      window.addEventListener('keydown', (e) => {
        if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'k') {
          e.preventDefault(); input?.focus();
        }
      });
    </script>
  </body>
 </html>
