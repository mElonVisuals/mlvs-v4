<!-- ==== ULTRA-MODERN ACTIVITY MONITORING DASHBOARD ==== -->
<section class="panel glass analytics-panel" id="secActivity">
  <div class="panel-head">
    <h3>
  <span class="ui-icon" data-icon="stats"></span>
      Live Activity Stream
    </h3>
    <div class="panel-actions">
      <div class="activity-stats">
        <span class="stat-badge">
          <span class="stat-number" id="activityCount">0</span>
          <span class="stat-label">Events</span>
        </span>
        <span class="stat-badge">
          <span class="stat-number" id="activityRate">0/min</span>
          <span class="stat-label">Rate</span>
        </span>
      </div>
      <button class="btn small" id="actRefresh" style="display: flex; align-items: center; gap: var(--space-2);">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M23 4v6h-6M1 20v-6h6"/>
          <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
        </svg>
        Refresh
      </button>
      <button class="btn small" id="clearActivity" style="display: flex; align-items: center; gap: var(--space-2);">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 6h18"/>
          <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
          <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
        </svg>
        Clear
      </button>
    </div>
  </div>
  
  <!-- Real-time Activity Filters -->
  <div class="activity-controls">
    <div class="filter-row">
      <div class="filter-group">
        <label for="activityFilter" class="filter-label">Filter Events</label>
        <select id="activityFilter" class="filter-select">
          <option value="">All Activities</option>
          <option value="command">Commands</option>
          <option value="join">User Joins</option>
          <option value="leave">User Leaves</option>
          <option value="message">Messages</option>
          <option value="error">Errors</option>
          <option value="warning">Warnings</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label for="serverFilter" class="filter-label">Server</label>
        <select id="serverFilter" class="filter-select">
          <option value="">All Servers</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label for="timeRange" class="filter-label">Time Range</label>
        <select id="timeRange" class="filter-select">
          <option value="1h">Last Hour</option>
          <option value="6h">Last 6 Hours</option>
          <option value="24h" selected>Last 24 Hours</option>
          <option value="7d">Last 7 Days</option>
        </select>
      </div>
      
      <div class="filter-group">
        <div class="toggle-group">
          <label class="toggle-label">
            <input type="checkbox" id="autoScroll" checked />
            <span class="toggle-slider"></span>
            Auto-scroll
          </label>
          <label class="toggle-label">
            <input type="checkbox" id="showTimestamps" checked />
            <span class="toggle-slider"></span>
            Timestamps
          </label>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Enhanced Activity List -->
  <div class="activity-container">
    <ul id="d2Activity" class="activity-list" aria-live="polite" aria-label="Real-time activity feed">
      <!-- Activity items will be populated here -->
    </ul>
    
    <!-- Empty State -->
    <div class="activity-empty" id="activityEmpty" style="display: none;">
      <div class="empty-icon">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="12" cy="12" r="10"/>
          <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
          <line x1="9" y1="9" x2="9.01" y2="9"/>
          <line x1="15" y1="9" x2="15.01" y2="9"/>
        </svg>
      </div>
      <h3>No Activity Found</h3>
      <p>No recent activity matches your current filters. Try adjusting the filters or check back later.</p>
      <button class="btn" onclick="document.getElementById('actRefresh').click()">Refresh Activity</button>
    </div>
    
    <!-- Loading State -->
    <div class="activity-loading" id="activityLoading">
      <div class="loading-spinner"></div>
      <p>Loading activity stream...</p>
    </div>
  </div>
</section>

<!-- Activity Pattern Analysis Panel -->
<section class="panel glass analytics-panel mt-section" id="secActivityAnalysis">
  <div class="panel-head">
    <h3>
  <span class="ui-icon" data-icon="performance"></span>
      Activity Analysis
    </h3>
  </div>
  
  <div class="glass-block-alt">
    <div class="analysis-grid">
      <div class="analysis-card">
        <div class="analysis-header">
          <h4>Peak Hours</h4>
          <div class="analysis-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12,6 12,12 16,14"/>
            </svg>
          </div>
        </div>
        <div class="analysis-content">
          <div class="peak-time">
            <span class="time-value">2:00 PM - 6:00 PM</span>
            <span class="time-label">Most Active</span>
          </div>
          <div class="peak-chart">
            <div class="hour-bar" data-hour="0" style="height: 20%;"></div>
            <div class="hour-bar" data-hour="1" style="height: 15%;"></div>
            <div class="hour-bar" data-hour="2" style="height: 10%;"></div>
            <div class="hour-bar" data-hour="3" style="height: 25%;"></div>
            <div class="hour-bar" data-hour="4" style="height: 45%;"></div>
            <div class="hour-bar" data-hour="5" style="height: 80%;"></div>
            <div class="hour-bar" data-hour="6" style="height: 100%;"></div>
            <div class="hour-bar" data-hour="7" style="height: 85%;"></div>
            <div class="hour-bar" data-hour="8" style="height: 90%;"></div>
            <div class="hour-bar" data-hour="9" style="height: 70%;"></div>
            <div class="hour-bar" data-hour="10" style="height: 60%;"></div>
            <div class="hour-bar" data-hour="11" style="height: 40%;"></div>
          </div>
        </div>
      </div>
      
      <div class="analysis-card">
        <div class="analysis-header">
          <h4>Top Commands</h4>
          <div class="analysis-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12l2 2 4-4"/>
              <circle cx="12" cy="12" r="10"/>
            </svg>
          </div>
        </div>
        <div class="analysis-content">
          <div class="command-list">
            <div class="command-item">
              <span class="command-name">/help</span>
              <span class="command-count">1,247</span>
            </div>
            <div class="command-item">
              <span class="command-name">/music play</span>
              <span class="command-count">892</span>
            </div>
            </section>
            <script type="module" src="/activity.js"></script>
        activityLoading.style.display = 'none';
      }, 500);
    });
    
    document.getElementById('clearActivity').addEventListener('click', () => {
      activityData = [];
      filteredData = [];
      renderActivityList();
      updateStats();
    });
    
    // Filter change listeners
    ['activityFilter', 'serverFilter', 'timeRange'].forEach(id => {
      document.getElementById(id).addEventListener('change', applyFilters);
    });
    
    // Populate server filter
    const serverFilter = document.getElementById('serverFilter');
    const servers = ['General Server', 'Gaming Hub', 'Study Group', 'Art Community'];
    servers.forEach(server => {
      const option = document.createElement('option');
      option.value = server;
      option.textContent = server;
      serverFilter.appendChild(option);
    });
    
    // Initialize with some mock data
    for (let i = 0; i < 15; i++) {
      const mockActivity = generateMockActivity();
      // Vary timestamps for realistic data
      mockActivity.timestamp = new Date(Date.now() - Math.random() * 24 * 60 * 60 * 1000);
      activityData.push(mockActivity);
    }
    
    // Sort by timestamp (newest first)
    activityData.sort((a, b) => b.timestamp - a.timestamp);
    
    // Initial render
    applyFilters();
    startRealTimeUpdates();
    
    console.log('âœ… Activity monitoring dashboard initialized');
  });
</script>
